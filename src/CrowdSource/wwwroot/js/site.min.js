$(document).ready(function(){function n(){t=!0;u.text("*你做出了修改。若要保存新的修改，请按“保存修改”。如果是误修改，请按“这条没错”。");i.show()}function f(n){t&&(confirm("确定要标记为【这条没错】吗？")||n.preventDefault())}var i,r,u,t;$("#BUCSetEmptyBtn").click(function(){$("#TextBUC").val("{empty}")});$("#IsPivotRow").is(":checked")?$("#PivotRowSpecificFields").show():$("#PivotRowSpecificFields").hide();$("#IsPivotRow").click(function(){$(this).is(":checked")?$("#PivotRowSpecificFields").show():$("#PivotRowSpecificFields").hide()});i=$("#btnSubmit");r=$("#btnReview");r.click(f);u=$("#promptModified");t=!1;$("#TextChinese").change(n);$("#TextBUC").change(n);$("#TextEnglish").change(n);$("#Radical").change(n);$("#BoPoMoFo").change(n);$("#IsPivotRow").change(n);$("#IsOral").change(n);$("#IsLiterary").change(n);$("#btnReport").click(function(){$("#reportForm").submit()})}),function(n){var t=new Tour({template:'<div class="popover" role="tooltip"><div class="arrow"><\/div><h3 class="popover-title"><\/h3><div class="popover-content"><\/div><div class="popover-navigation">  <div class="btn-group">    <button class="btn btn-sm btn-default" data-role="prev">&laquo; 上一步<\/button>    <button class="btn btn-sm btn-default" data-role="next">下一步 &raquo;<\/button>    <button class="btn btn-sm btn-default"            data-role="pause-resume"            data-pause-text="暂停"            data-resume-text="继续">暂停<\/button>  <\/div>  <button class="btn btn-sm btn-default" data-role="end">结束向导<\/button><\/div><\/div>',steps:[{orphan:!0,title:"欢迎",content:"本向导将带你熟悉《闽英大辞典》众包的界面。"},{element:"#OriginalImage",title:"原始图片",content:"这是你要录入的图片。每个图片代表字典中的一个条目。每个图片左、中、右分为 罗马字、汉字、英文三个部分。",backdrop:!0,backdropPadding:5},{element:"#rightPanel",title:"录入",content:"你要做的是在右边录入左边图片里的内容。",backdrop:!0,backdropPadding:5,placement:"left"},{element:"#selector",title:"录入模式",content:"你可以选择只输入一种类型。比如，你可以只录入汉字。没有录入完的部分，会自动交给其他人录入。",backdrop:!0,backdropPadding:5,placement:"bottom"},{element:"#OriginalImage",title:"录入模式指示器",content:"图片下面的图标，提醒你正在录入哪个类型。",backdrop:!0,backdropPadding:5,placement:"bottom"},{element:"#editor",title:"",content:"有的时候，录入框里已经有内容了。这是之前电脑识别的结果，或是其他用户录入的。如果有错，就把它更正。",backdrop:!0,backdropPadding:5,placement:"left"},{element:"#PreviewPanel",title:"预览",content:"这是已录入内容的预览。",backdrop:!0,backdropPadding:5,placement:"top"},{element:"#btnSubmit",title:"提交",content:"录入完一条，点这里提交。",backdrop:!0,backdropPadding:5,placement:"top"},{element:"#btnSkip",title:"跳过",content:"或者点这里跳过，换一条。",backdrop:!0,backdropPadding:5,placement:"top"},{element:"#btnReport",title:"报告错误",content:"如果图片不清楚、空白或者包含了多个条目，请点这里汇报。",backdrop:!0,backdropPadding:5,placement:"top"},{orphan:!0,title:"开始行动吧",content:"你可以点右上角的“帮助向导”重新启动此向导。"}]});n(document).ready(function(){t.init();t.start();n("#RestartTour").click(function(){t.restart()})});n(document).ready(function(){function t(){console.log("Submitting!");n("#btnSubmit").removeClass("uk-button-primary");n("#btnSubmit").text("提交中...");n("#editorForm").submit()}function i(){n("#skipForm").submit()}function u(){confirm("确定要标记此条为【图片不清楚】吗？若是不会输入请选择【换一条】。")&&(console.log("Reporting!"),n("#reportForm").submit())}n("#btnSubmit").click(t);n("#btnReport").click(u);n("#btnSkip").click(i);var r=document.querySelector("#editorForm");Mousetrap.bind("mod+s",function(n){console.log(n);n.preventDefault?n.preventDefault():n.returnValue=!1;t()});Mousetrap(r).bind("mod+s",function(n){console.log(n);n.preventDefault?n.preventDefault():n.returnValue=!1;t()});Mousetrap.bind("f2",function(n){console.log(n);n.preventDefault?n.preventDefault():n.returnValue=!1;i()});Mousetrap(r).bind("f2",function(n){console.log(n);n.preventDefault?n.preventDefault():n.returnValue=!1;i()})})}(jQuery),function(){$(document).ready(function(){var n={rtl:!1,position:{of:null,my:"center top",at:"center top",at2:"center bottom"},reposition:!0,usePreview:!1,alwaysOpen:!1,initialFocus:!0,noFocus:!1,stayOpen:!1,userClosed:!1,ignoreEsc:!1,wheelMessage:"Use mousewheel to see other keys",css:{input:"ui-widget-content ui-corner-all",container:"ui-widget-content ui-corner-all ui-helper-clearfix",popup:"",buttonDefault:"ui-state-default ui-corner-all myKeyButton",buttonHover:"ui-state-hover",buttonAction:"ui-state-active",buttonActive:"ui-state-active",buttonDisabled:"ui-state-disabled",buttonEmpty:"ui-keyboard-empty"},autoAccept:!0,autoAcceptOnEsc:!0,lockInput:!1,restrictInput:!1,restrictInclude:"",acceptValid:!0,autoAcceptOnValid:!1,cancelClose:!0,tabNavigation:!0,enterNavigation:!1,enterMod:"altKey",stopAtEnd:!0,appendLocally:!0,appendTo:"body",stickyShift:!0,preventPaste:!1,caretToEnd:!1,scrollAdjustment:10,maxLength:!1,maxInsert:!0,repeatDelay:500,repeatRate:20,resetDefault:!1,openOn:"focus",keyBinding:"mousedown touchstart",useWheel:!0,initialized:function(){},beforeVisible:function(){},visible:function(){},beforeInsert:function(n,t,i,r){return r},change:function(){},beforeClose:function(){},accepted:function(){},canceled:function(){},restricted:function(){},hidden:function(){},switchInput:function(){}},r=JSON.parse(JSON.stringify(n)),t=JSON.parse(JSON.stringify(n)),i=JSON.parse(JSON.stringify(n)),u=JSON.parse(JSON.stringify(n));r.layout="buc";t.layout="bopomofo";t.position.my="left top";t.position.at2="right top";i.layout="radicals";i.position.my="left top";i.position.at2="right top";u.layout="cdo";$("#TextBUC").keyboard(r);$("#TextEnglish").keyboard(r);$("#TextChinese").keyboard(u);$("#Radical").keyboard(i);$("#BoPoMoFo").keyboard(t)})}(),function(n){n(document).ready(function(){function t(){n("#previewBUC").text(n("#TextBUC").val().trim()=="{empty}"?"":n("#TextBUC").val());n("#previewEnglish").text(n("#TextEnglish").val());n("#previewChinese").text(n("#TextChinese").val());n("#previewRadical").text(n("#IsPivotRow").is(":checked")?n("#Radical").val():"");n("#previewBoPoMoFo").text(n("#IsPivotRow").is(":checked")?n("#BoPoMoFo").val():"");n("#previewLabel").text((n("#IsOral").is(":checked")?"俗":"")+(n("#IsLiterary").is(":checked")?"文":""))}function i(){var n=localStorage.getItem("ShowPreviewer");return n==null&&(n=!1),n=="true"}function r(){i()?n("#previewPanel").show():n("#previewPanel").hide()}function u(){var n=!i();localStorage.setItem("ShowPreviewer",n?"true":"false");r()}t();r();n("#previewerToggle").click(u);n("#TextChinese").change(t);n("#TextBUC").change(t);n("#TextEnglish").change(t);n("#Radical").change(t);n("#BoPoMoFo").change(t);n("#IsPivotRow").change(t);n("#IsOral").change(t);n("#IsLiterary").change(t)})}(jQuery),function(n){n(document).ready(function(){var t=n(".groupImg");console.log(t);t.magnify({speed:0,src:t.attr("src")})})}(jQuery),function(n){n(document).ready(function(){function i(){var n=localStorage.getItem("EditorMode");return n==null&&(n="all"),n}function t(t,i){n("#ModeIndicator__"+t+"__on").toggle(!!i);n("#ModeIndicator__"+t+"__off").toggle(!i)}function r(){var r=i();console.log(window.editorOptions[r]);n("#editorBUC").toggle(!!window.editorOptions[r].buc);n("#editorChinese").toggle(!!window.editorOptions[r].chi);n("#editorEnglish").toggle(!!window.editorOptions[r].eng);t("buc",window.editorOptions[r].buc);t("chi",window.editorOptions[r].chi);t("eng",window.editorOptions[r].eng);n(window.autofocusItem[r]).focus()}function u(){var t=n("#editorMode").val();localStorage.setItem("EditorMode",t);r()}window.editorOptions={all:{buc:!0,chi:!0,eng:!0},buc:{buc:!0,chi:!1,eng:!1},chi:{buc:!1,chi:!0,eng:!1},eng:{buc:!1,chi:!1,eng:!0}};window.autofocusItem={all:"#TextBUC",buc:"#TextBUC",chi:"#TextChinese",eng:"#TextEnglish"};n("#editorMode").val(i());r();n("#editorMode").change(u)})}(jQuery);